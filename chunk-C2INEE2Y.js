import{$ as te,A as p,Aa as V,Ca as le,Da as A,E as q,F as l,G as b,H as d,I as P,J as z,K as W,L as G,M as Z,N as x,O as U,P as K,Q,S as X,T as Y,U as k,V as M,W as N,X as O,_ as ee,c as F,ca as ie,e as w,ea as ne,f as y,g as j,ga as R,h as g,i as h,ia as oe,j as S,k as $,ka as re,l as H,m as J,ma as ae,n as a,o as _,q as c,r as m,ra as se,t as r,u as n,ua as E,v,w as D,x as I,y as C,z as u}from"./chunk-R4EPYNQP.js";var me=[{label:"Form Name",filter:!1,sortAsc:!1,show:!1,name:"formName",width:"10%"},{label:"Number of steps",filter:!1,sortAsc:!0,show:!1,name:"stepsCount"},{label:"Action",filter:!1,sortAsc:!1,show:!1,name:""}],ce=[{label:"#",filter:!1,sortAsc:!1,show:!1,name:"",width:"10%"},{label:"Data(step 1 - field 1)",filter:!1,sortAsc:!1,show:!1,name:""},{label:"Submission Date",filter:!1,sortAsc:!0,show:!1,name:""},{label:"Action",filter:!1,sortAsc:!1,show:!1,name:""}];var Ce=()=>["/forms-listing/listing"],be=(t,s,e)=>({"th-width-0":t,"th-width-1":s,"th-width-2":e}),de=t=>["/forms-listing/form-view",t];function xe(t,s){if(t&1){let e=C();r(0,"button",18),u("click",function(){g(e);let o=p();return h(o.addNewForm())}),r(1,"span"),S(),r(2,"svg",19),v(3,"path",20),n()(),l(4," Add New Form "),n()}}function Fe(t,s){t&1&&(r(0,"button",21),l(1,"SEE ALL"),n()),t&2&&m("routerLink",Z(1,Ce))}function we(t,s){if(t&1&&(D(0),r(1,"th",25)(2,"div",26),l(3),n()(),I()),t&2){let e=s.$implicit,i=s.index;a(),m("ngClass",U(2,be,i===0,i===1,i===2)),a(2),d(" ",e.label," ")}}function ye(t,s){if(t&1){let e=C();r(0,"tr")(1,"td")(2,"div",26),l(3),n()(),r(4,"td")(5,"div",26),l(6),n()(),r(7,"td")(8,"div",26)(9,"button",27)(10,"a",28),l(11,"View"),n()(),r(12,"button",29),u("click",function(){let o=g(e).$implicit,f=p(2);return h(f.confirmAndDelete(o))}),l(13,"Delete"),n()()()()}if(t&2){let e=s.$implicit;a(3),d(" ",e.formName," "),a(3),d(" ",e.stepsCount," "),a(4),m("routerLink",x(4,de,e.formName))("href",x(6,de,e.formName),J)}}function Se(t,s){if(t&1&&(r(0,"table",22)(1,"thead",23)(2,"tr"),c(3,we,4,6,"ng-container",24),n()(),r(4,"tbody"),c(5,ye,14,8,"tr",24),n()()),t&2){let e=p();a(3),m("ngForOf",e.headers)("ngForTrackBy",e.trackHeader),a(2),m("ngForOf",e.filteredForms)("ngForTrackBy",e.trackForm)}}function De(t,s){t&1&&(r(0,"div")(1,"div",30)(2,"div",31),v(3,"img",32),n(),r(4,"div",33),l(5,"No records found"),n()()())}var pe=(()=>{class t{constructor(e,i,o){this.modalService=e,this.confirmationService=i,this.cdRef=o,this.forms=[],this.isFromDashboard=!1,this.formDeleted=new H,this.formListingData={},this.filteredForms=[],this.headers=me,this.reqData={FormName:""},this.loadStoredData(),this.totalRecords()}ngOnChanges(e){e.forms&&this.loadStoredData()}loadStoredData(){let e=sessionStorage.getItem("savedForms");this.formListingData=e?JSON.parse(e):[],this.filteredForms=[...this.formListingData]}totalRecords(){return this.filteredForms.length}searchForm(){let e=this.reqData.FormName.trim().toLowerCase();e?this.filteredForms=this.formListingData.filter(i=>i.formName.toLowerCase().includes(e)):this.filteredForms=[...this.formListingData]}trackForm(e,i){return i.formName}trackHeader(e,i){return i.name}confirmAndDelete(e){this.confirmationService.open({title:"Confirm Delete",message:`Are you sure you want to delete ${e.formName} (${e.stepsCount} ${e.stepsCount>1?"steps":"step"})? This will also delete submitted forms.`,actions:{confirm:{label:"Delete ",class:"btn btn-secondary"}}}).then(o=>{o=="Confirmed"&&this.deleteForm(e)})}deleteForm(e){this.formListingData=this.formListingData.filter(o=>o.formName!==e.formName),sessionStorage.setItem("savedForms",JSON.stringify(this.formListingData));let i=sessionStorage.getItem("savedFormData");if(i){let o=JSON.parse(i);delete o[e.formName],sessionStorage.setItem("savedFormData",JSON.stringify(o))}this.loadStoredData(),this.cdRef.detectChanges(),this.formDeleted.emit()}addNewForm(){this.modalService.open(le,{backdrop:"static",centered:!0,size:"lg"}).result.then(()=>{this.loadStoredData(),this.cdRef.detectChanges()},()=>{this.loadStoredData(),this.cdRef.detectChanges()})}static{this.\u0275fac=function(i){return new(i||t)(_(E),_(V),_(k))}}static{this.\u0275cmp=w({type:t,selectors:[["app-forms-listing"]],inputs:{forms:"forms",isFromDashboard:"isFromDashboard"},outputs:{formDeleted:"formDeleted"},features:[j],decls:24,vars:7,consts:[["scrollDiv",""],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"main-right-white-block","listing-block-height"],[1,"d-flex","justify-content-between","page-header","pb-md-4","pt-md-1"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","vl-btn",3,"routerLink",4,"ngIf"],[1,"search-control","pb-3"],[1,"col-md-5"],[1,"search-block"],[1,"search-element"],["src","assets/icons/search.svg","alt","search"],["placeholder","SEARCH","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"scorbar-table",2,"height","calc(91vh - 200px)"],[1,"custom-table-container"],["class","no-border-table tbl-wid",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 18 18","fill","none"],["d","M10.9758 1.94817C10.9758 0.872224 10.1035 0 9.0276 0C7.95165 0 7.07943 0.872226 7.07943 1.94817V5.07957C7.07943 6.18414 6.184 7.07957 5.07943 7.07957L1.94817 7.07957C0.872227 7.07957 0 7.9518 0 9.02774C0 10.1037 0.872226 10.9759 1.94817 10.9759H5.07943C6.184 10.9759 7.07943 11.8713 7.07943 12.9759V16.0518C7.07943 17.1278 7.95165 18 9.0276 18C10.1035 18 10.9758 17.1278 10.9758 16.0518V12.9759C10.9758 11.8713 11.8712 10.9759 12.9758 10.9759H16.0518C17.1278 10.9759 18 10.1037 18 9.02774C18 7.9518 17.1278 7.07957 16.0518 7.07957L12.9758 7.07957C11.8712 7.07957 10.9758 6.18414 10.9758 5.07957V1.94817Z","fill","#F9FDFF"],[1,"vl-btn",3,"routerLink"],[1,"no-border-table","tbl-wid"],[1,"capital-case","thead-align-right-con","thead-sticky",2,"cursor","pointer"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[1,"act-cont"],[1,"btn","btn-primary","btn-sm"],[1,"nav-link",3,"routerLink","href"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"empty-state__active"],[1,"empty-state__icon"],["src","assets/icons/empty_item.svg","alt","empty"],[1,"empty-state__message"]],template:function(i,o){if(i&1){let f=C();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"section",4)(4,"div",5)(5,"h2"),l(6),n(),c(7,xe,5,0,"button",6)(8,Fe,2,2,"button",7),n(),r(9,"div",8)(10,"div",2)(11,"div",9)(12,"div",10)(13,"h2"),l(14),n(),r(15,"div",11)(16,"span"),v(17,"img",12),n(),r(18,"input",13),G("ngModelChange",function(L){return g(f),W(o.reqData.FormName,L)||(o.reqData.FormName=L),h(L)}),u("ngModelChange",function(){return g(f),h(o.searchForm())}),n()()()()()(),r(19,"div",14,0)(21,"div",15),c(22,Se,6,4,"table",16),n()(),c(23,De,6,0,"div",17),n()()()()}i&2&&(a(6),b(o.isFromDashboard?"Created forms":"List of all the forms"),a(),m("ngIf",!o.isFromDashboard),a(),m("ngIf",o.isFromDashboard),a(6),d("",o.totalRecords()," Results"),a(4),z("ngModel",o.reqData.FormName),a(4),m("ngIf",o.filteredForms.length>0),a(),m("ngIf",o.filteredForms.length==0))},dependencies:[M,N,O,ne,oe,re,ae],styles:[".listing-block-height[_ngcontent-%COMP%]{height:calc(90vh - 20px)}.act-cont[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:10px;justify-content:center}.tbl-wid[_ngcontent-%COMP%]{width:100%!important}.th-width-0[_ngcontent-%COMP%], .th-width-1[_ngcontent-%COMP%]{width:35%}.th-width-2[_ngcontent-%COMP%]{width:30%}.empty-state[_ngcontent-%COMP%]{width:auto;background:#fff;border-radius:4px}.empty-state__active[_ngcontent-%COMP%]{top:-400px;position:relative;padding:48px;display:flex;align-items:center;flex-direction:column}.empty-state__icon[_ngcontent-%COMP%]{width:150px;height:145px;display:flex;align-items:center;border-radius:200px;justify-content:center;background-color:#f7fafc;box-shadow:0 2px 1px #e1e3ec}.empty-state__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.empty-state__message[_ngcontent-%COMP%]{color:#009684;font-size:1.5rem;font-weight:500;margin-top:.85rem}"],changeDetection:0})}}return t})();var Ie=t=>({"rotate-icon":t}),ke=(t,s,e,i)=>({"th-width-0":t,"th-width-1":s,"th-width-2":e,"th-width-3":i});function Me(t,s){t&1&&(r(0,"span",27),l(1,"* "),n())}function Ne(t,s){if(t&1&&(r(0,"span"),l(1),n()),t&2){let e=p().$implicit;a(),d(" - Options: ",e.options," ")}}function Oe(t,s){if(t&1&&(r(0,"span"),l(1),n()),t&2){let e=p().$implicit;a(),d(" - Options: ",e.options," ")}}function Ee(t,s){if(t&1&&(r(0,"span"),l(1),n()),t&2){let e=p().$implicit;a(),P(" - Options: ",e.options," (",e.selectionType==="multi"?"Multi Select":"Single Select",") ")}}function Ve(t,s){if(t&1&&(r(0,"li")(1,"strong"),l(2),n(),c(3,Me,2,0,"span",26),l(4),c(5,Ne,2,1,"span",22)(6,Oe,2,1,"span",22)(7,Ee,2,2,"span",22),n()),t&2){let e=s.$implicit;a(2),b(e.label),a(),m("ngIf",e.required),a(),d(" (",e.type,") "),a(),m("ngIf",e.type==="dropdown"),a(),m("ngIf",e.type==="radio"),a(),m("ngIf",e.type==="checkbox")}}function Te(t,s){if(t&1&&(r(0,"div")(1,"h5"),l(2),n(),r(3,"ul"),c(4,Ve,8,6,"li",25),n()()),t&2){let e=s.$implicit,i=s.index,o=p(3);a(2),P("Step ",i+1,": ",e.stepName,""),a(2),m("ngForOf",e.fields)("ngForTrackBy",o.trackByField)}}function Le(t,s){if(t&1&&(r(0,"div"),c(1,Te,5,4,"div",25),n()),t&2){let e=p(2);a(),m("ngForOf",e.formData.stepFields)("ngForTrackBy",e.trackByStep)}}function Pe(t,s){t&1&&(r(0,"p",28),l(1,"No steps available for this form."),n())}function Re(t,s){if(t&1&&(r(0,"div",5)(1,"div",23),c(2,Le,2,2,"div",24)(3,Pe,2,0,"ng-template",null,1,Y),n()()),t&2){let e=q(4),i=p();a(2),m("ngIf",(i.formData==null||i.formData.stepFields==null?null:i.formData.stepFields.length)>0)("ngIfElse",e)}}function Ae(t,s){if(t&1&&(D(0),r(1,"th",31)(2,"div",32),l(3),n()(),I()),t&2){let e=s.$implicit,i=s.index;a(),m("ngClass",K(2,ke,i===0,i===1,i===2,i===3)),a(2),d(" ",e.label," ")}}function Be(t,s){if(t&1){let e=C();r(0,"tr")(1,"td")(2,"div",32),l(3),n()(),r(4,"td",33)(5,"div",32),l(6),n()(),r(7,"td")(8,"div",32),l(9),Q(10,"date"),n()(),r(11,"td")(12,"div",32)(13,"button",34),u("click",function(){let o=g(e).index,f=p(2);return h(f.viewSubmission(o))}),l(14," View "),n(),r(15,"button",35),u("click",function(){let o=g(e).index,f=p(2);return h(f.confirmAndDelete(o))}),l(16," Delete "),n()()()()}if(t&2){let e=s.$implicit,i=s.index;a(3),d(" ",i+1," "),a(3),d(" ",(e.stepFields==null||e.stepFields[0]==null?null:e.stepFields[0].stepName)+" : "+(e.stepFields==null||e.stepFields[0]==null||e.stepFields[0].fields==null||e.stepFields[0].fields[0]==null?null:e.stepFields[0].fields[0].label)+" "+(e.stepFields==null||e.stepFields[0]==null||e.stepFields[0].fields==null||e.stepFields[0].fields[0]==null?null:e.stepFields[0].fields[0].value)," "),a(3),d(" ",X(10,3,e.date,"MMM dd, yyyy")," ")}}function je(t,s){if(t&1&&(r(0,"table",29)(1,"thead",30),c(2,Ae,4,7,"ng-container",25),n(),r(3,"tbody"),c(4,Be,17,6,"tr",25),n()()),t&2){let e=p();a(2),m("ngForOf",e.headers)("ngForTrackBy",e.trackHeader),a(2),m("ngForOf",e.formSubmissions)("ngForTrackBy",e.trackByIndex)}}function $e(t,s){t&1&&(r(0,"div")(1,"div",36)(2,"div",37),v(3,"img",38),n(),r(4,"div",39),l(5,"No records found"),n()()())}var fe=(()=>{class t{constructor(e,i,o,f){this.route=e,this.modalService=i,this.cdRef=o,this.confirmationService=f,this.formName="",this.formData={},this.isCollapsed=!0,this.formSubmissions=[],this.headers=ce}ngOnInit(){this.formName=this.route.snapshot.paramMap.get("formName"),this.formName&&(this.fetchFormData(),this.fetchFormSubmissions())}fetchFormData(){let e=sessionStorage.getItem("savedForms");if(e){let i=JSON.parse(e);this.formData=i.find(o=>o.formName===this.formName)||{}}}fetchFormSubmissions(){let e=sessionStorage.getItem("savedFormData");if(e){let i=JSON.parse(e);this.formName&&(this.formSubmissions=i[this.formName]||[])}}trackHeader(e,i){return i.name}viewSubmission(e){let i=this.modalService.open(A,{backdrop:"static",centered:!0});i.componentInstance.form=this.formData,i.componentInstance.submissionData=this.formSubmissions[e],i.componentInstance.isView=!0,i.componentInstance.index=e,i.componentInstance.formName=this.formName,i.result.then(()=>{this.fetchFormSubmissions(),this.cdRef.detectChanges()}).catch(()=>{})}toggleCollapse(){this.isCollapsed=!this.isCollapsed}addFormData(){let e=this.modalService.open(A,{backdrop:"static",centered:!0});e.componentInstance.form=this.formData,e.result.then(()=>{this.fetchFormSubmissions(),this.cdRef.detectChanges()}).catch(()=>{})}trackByIndex(e,i){return e}confirmAndDelete(e){this.confirmationService.open({title:"Confirm Delete",message:"Are you sure you want to delete this form data?",actions:{confirm:{label:"Delete ",class:"btn btn-secondary"}}}).then(o=>{o=="Confirmed"&&this.deleteFormData(e)})}deleteFormData(e){if(this.formName){let i=sessionStorage.getItem("savedFormData");if(i){let o=JSON.parse(i);o[this.formName]&&(o[this.formName].splice(e,1),sessionStorage.setItem("savedFormData",JSON.stringify(o)),this.fetchFormSubmissions(),this.cdRef.detectChanges())}}}trackByStep(e,i){return i.stepName}trackByField(e,i){return i.label}static{this.\u0275fac=function(i){return new(i||t)(_(ie),_(E),_(k),_(V))}}static{this.\u0275cmp=w({type:t,selectors:[["app-form-view"]],decls:33,vars:9,consts:[["scrollDiv",""],["noSteps",""],[1,"prview-section"],[1,"p-4"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"col-md-6"],[1,"cln-hd-left-fs"],[1,"col-md-4"],[1,"d-flex","align-items-center","justify-content-end"],[1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 18 18","fill","none"],["d","M10.9758 1.94817C10.9758 0.872224 10.1035 0 9.0276 0C7.95165 0 7.07943 0.872226 7.07943 1.94817V5.07957C7.07943 6.18414 6.184 7.07957 5.07943 7.07957L1.94817 7.07957C0.872227 7.07957 0 7.9518 0 9.02774C0 10.1037 0.872226 10.9759 1.94817 10.9759H5.07943C6.184 10.9759 7.07943 11.8713 7.07943 12.9759V16.0518C7.07943 17.1278 7.95165 18 9.0276 18C10.1035 18 10.9758 17.1278 10.9758 16.0518V12.9759C10.9758 11.8713 11.8712 10.9759 12.9758 10.9759H16.0518C17.1278 10.9759 18 10.1037 18 9.02774C18 7.9518 17.1278 7.07957 16.0518 7.07957L12.9758 7.07957C11.8712 7.07957 10.9758 6.18414 10.9758 5.07957V1.94817Z","fill","#F9FDFF"],[1,"strc-prview-section"],[1,"collapsible-header",3,"click"],[2,"top","-2px !important","position","relative",3,"ngClass"],["class","row",4,"ngIf"],[1,"main-right-white-block","listing-block-height","tbl-sct"],[1,"scorbar-table",2,"height","calc(59vh - 200px)"],[1,"custom-table-container"],["class","no-border-table tbl-wid",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"text-muted"],[1,"no-border-table","tbl-wid"],[1,"capital-case","thead-align-right-con","thead-sticky",2,"cursor","pointer"],[3,"ngClass"],[1,"act-cont"],[1,"col-width-30","fit-text"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"empty-state__active"],[1,"empty-state__icon"],["src","assets/icons/empty_item.svg","alt","empty"],[1,"empty-state__message"]],template:function(i,o){if(i&1){let f=C();r(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",5)(6,"div",7)(7,"div",8)(8,"h2"),l(9),n(),r(10,"h4"),l(11),n()()()()(),r(12,"div",9)(13,"div",10)(14,"button",11),u("click",function(){return g(f),h(o.addFormData())}),r(15,"span"),S(),r(16,"svg",12),v(17,"path",13),n()(),l(18," Add Data in Form "),n()()()()()()(),$(),r(19,"section",14)(20,"div",3)(21,"div",4)(22,"h4",15),u("click",function(){return g(f),h(o.toggleCollapse())}),l(23),r(24,"span",16),l(25," \u25BC "),n()(),c(26,Re,5,2,"div",17),n()()(),r(27,"section",18)(28,"div",19,0)(30,"div",20),c(31,je,5,4,"table",21),n()(),c(32,$e,6,0,"div",22),n()}i&2&&(a(9),b(o.formName),a(2),d("Steps: ",o.formData.stepsCount,""),a(12),d(" View ",o.formName," form structure "),a(),m("ngClass",x(7,Ie,o.isCollapsed)),a(2),m("ngIf",!o.isCollapsed),a(5),m("ngIf",o.formSubmissions.length>0),a(),m("ngIf",o.formSubmissions.length===0))},dependencies:[M,N,O,ee],styles:[".prview-section[_ngcontent-%COMP%]{background:#eff6fb;margin-top:-10px;margin-left:-10px;margin-right:-10px}.tbl-sct[_ngcontent-%COMP%]{margin:20px}.act-cont[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:10px;justify-content:center}.tbl-wid[_ngcontent-%COMP%]{width:100%!important}.th-width-0[_ngcontent-%COMP%]{width:10%}.th-width-1[_ngcontent-%COMP%], .th-width-2[_ngcontent-%COMP%], .th-width-3[_ngcontent-%COMP%]{width:30%}.empty-state[_ngcontent-%COMP%]{width:auto;background:#fff;border-radius:4px}.empty-state__active[_ngcontent-%COMP%]{top:-225px;position:relative;padding:48px;display:flex;align-items:center;flex-direction:column}.empty-state__icon[_ngcontent-%COMP%]{width:150px;height:145px;display:flex;align-items:center;border-radius:200px;justify-content:center;background-color:#f7fafc;box-shadow:0 2px 1px #e1e3ec}.empty-state__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.empty-state__message[_ngcontent-%COMP%]{color:#009684;font-size:1.5rem;font-weight:500;margin-top:.85rem}.strc-prview-section[_ngcontent-%COMP%]{background:#eff6fb;border:1px solid #88c6f3;border-radius:10px;margin:20px}.collapsible-header[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;font-weight:700;display:flex;align-items:center}.collapsible-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:transform .3s ease}.rotate-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.cln-hd-left-fs[_ngcontent-%COMP%]{display:flex;column-gap:15px;top:10px;align-items:center;position:relative}.cln-hd-left-fs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px;width:calc(100% - 110px)}.col-width-30[_ngcontent-%COMP%]{width:30%;min-width:100%;height:50px;min-height:100%;word-wrap:break-word;overflow-wrap:break-word;vertical-align:top}.fit-text[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;display:block}"],changeDetection:0})}}return t})();var He=[{path:"listing",component:pe},{path:"form-view/:formName",component:fe},{path:"**",pathMatch:"full",redirectTo:"dashboard"}],ge=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=F({imports:[R.forChild(He),R]})}}return t})();var ft=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=F({imports:[te,ge,se]})}}return t})();export{pe as a,ft as b};
