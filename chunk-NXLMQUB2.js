import{A as d,Ba as se,Ca as B,E as z,F as m,G as b,H as p,I as R,J as W,K as G,L as Z,M as U,N as x,O as M,P as K,R as Q,S as X,T as N,U as k,V as O,W as V,Z as Y,_ as ee,ba as te,c as F,da as ie,e as w,f as y,fa as A,g as $,h as g,ha as ne,i as h,j as S,ja as oe,k as H,l as J,la as re,m as q,n as a,o as _,q as c,qa as ae,r as l,t as r,ta as E,u as o,v,w as D,x as I,y as C,z as u,za as T}from"./chunk-A5DB7VT2.js";var me=[{label:"Form Name",filter:!1,sortAsc:!1,show:!1,name:"formName",width:"10%"},{label:"Number of steps",filter:!1,sortAsc:!0,show:!1,name:"stepsCount"},{label:"Action",filter:!1,sortAsc:!1,show:!1,name:""}],le=[{label:"#",filter:!1,sortAsc:!1,show:!1,name:"",width:"10%"},{label:"Submission Date",filter:!1,sortAsc:!0,show:!1,name:""},{label:"Action",filter:!1,sortAsc:!1,show:!1,name:""}];var ve=()=>["/forms-listing/listing"],Ce=(t,s,e)=>({"th-width-0":t,"th-width-1":s,"th-width-2":e}),ce=t=>["/forms-listing/form-view",t];function be(t,s){if(t&1){let e=C();r(0,"button",18),u("click",function(){g(e);let n=d();return h(n.addNewForm())}),r(1,"span"),S(),r(2,"svg",19),v(3,"path",20),o()(),m(4," Add New Form "),o()}}function xe(t,s){t&1&&(r(0,"button",21),m(1,"SEE ALL"),o()),t&2&&l("routerLink",U(1,ve))}function Fe(t,s){if(t&1&&(D(0),r(1,"th",25)(2,"div",26),m(3),o()(),I()),t&2){let e=s.$implicit,i=s.index;a(),l("ngClass",M(2,Ce,i===0,i===1,i===2)),a(2),p(" ",e.label," ")}}function we(t,s){if(t&1){let e=C();r(0,"tr")(1,"td")(2,"div",26),m(3),o()(),r(4,"td")(5,"div",26),m(6),o()(),r(7,"td")(8,"div",26)(9,"button",27)(10,"a",28),m(11,"View"),o()(),r(12,"button",29),u("click",function(){let n=g(e).$implicit,f=d(2);return h(f.confirmAndDelete(n))}),m(13,"Delete"),o()()()()}if(t&2){let e=s.$implicit;a(3),p(" ",e.formName," "),a(3),p(" ",e.stepsCount," "),a(4),l("routerLink",x(4,ce,e.formName))("href",x(6,ce,e.formName),q)}}function ye(t,s){if(t&1&&(r(0,"table",22)(1,"thead",23)(2,"tr"),c(3,Fe,4,6,"ng-container",24),o()(),r(4,"tbody"),c(5,we,14,8,"tr",24),o()()),t&2){let e=d();a(3),l("ngForOf",e.headers)("ngForTrackBy",e.trackHeader),a(2),l("ngForOf",e.filteredForms)("ngForTrackBy",e.trackForm)}}function Se(t,s){t&1&&(r(0,"div")(1,"div",30)(2,"div",31),v(3,"img",32),o(),r(4,"div",33),m(5,"No records found"),o()()())}var de=(()=>{class t{constructor(e,i,n){this.modalService=e,this.confirmationService=i,this.cdRef=n,this.forms=[],this.isFromDashboard=!1,this.formDeleted=new J,this.formListingData={},this.filteredForms=[],this.headers=me,this.reqData={FormName:""},this.loadStoredData(),this.totalRecords()}ngOnChanges(e){e.forms&&this.loadStoredData()}loadStoredData(){let e=sessionStorage.getItem("savedForms");this.formListingData=e?JSON.parse(e):[],this.filteredForms=[...this.formListingData]}totalRecords(){return this.filteredForms.length}searchForm(){let e=this.reqData.FormName.trim().toLowerCase();e?this.filteredForms=this.formListingData.filter(i=>i.formName.toLowerCase().includes(e)):this.filteredForms=[...this.formListingData]}trackForm(e,i){return i.formName}trackHeader(e,i){return i.name}confirmAndDelete(e){this.confirmationService.open({title:"Confirm Delete",message:`Are you sure you want to delete ${e.formName} (${e.stepsCount} ${e.stepsCount>1?"steps":"step"})? This will also delete submitted forms.`,actions:{confirm:{label:"Delete ",class:"btn btn-secondary"}}}).then(n=>{n=="Confirmed"&&this.deleteForm(e)})}deleteForm(e){this.formListingData=this.formListingData.filter(n=>n.formName!==e.formName),sessionStorage.setItem("savedForms",JSON.stringify(this.formListingData));let i=sessionStorage.getItem("savedFormData");if(i){let n=JSON.parse(i);delete n[e.formName],sessionStorage.setItem("savedFormData",JSON.stringify(n))}this.loadStoredData(),this.cdRef.detectChanges(),this.formDeleted.emit()}addNewForm(){this.modalService.open(se,{backdrop:"static",centered:!0,size:"lg"}).result.then(()=>{this.loadStoredData(),this.cdRef.detectChanges()},()=>{this.loadStoredData(),this.cdRef.detectChanges()})}static{this.\u0275fac=function(i){return new(i||t)(_(E),_(T),_(N))}}static{this.\u0275cmp=w({type:t,selectors:[["app-forms-listing"]],inputs:{forms:"forms",isFromDashboard:"isFromDashboard"},outputs:{formDeleted:"formDeleted"},features:[$],decls:24,vars:7,consts:[["scrollDiv",""],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"main-right-white-block","listing-block-height"],[1,"d-flex","justify-content-between","page-header","pb-md-4","pt-md-1"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","vl-btn",3,"routerLink",4,"ngIf"],[1,"search-control","pb-3"],[1,"col-md-5"],[1,"search-block"],[1,"search-element"],["src","assets/icons/search.svg","alt","search"],["placeholder","SEARCH","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"scorbar-table",2,"height","calc(91vh - 200px)"],[1,"custom-table-container"],["class","no-border-table tbl-wid",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 18 18","fill","none"],["d","M10.9758 1.94817C10.9758 0.872224 10.1035 0 9.0276 0C7.95165 0 7.07943 0.872226 7.07943 1.94817V5.07957C7.07943 6.18414 6.184 7.07957 5.07943 7.07957L1.94817 7.07957C0.872227 7.07957 0 7.9518 0 9.02774C0 10.1037 0.872226 10.9759 1.94817 10.9759H5.07943C6.184 10.9759 7.07943 11.8713 7.07943 12.9759V16.0518C7.07943 17.1278 7.95165 18 9.0276 18C10.1035 18 10.9758 17.1278 10.9758 16.0518V12.9759C10.9758 11.8713 11.8712 10.9759 12.9758 10.9759H16.0518C17.1278 10.9759 18 10.1037 18 9.02774C18 7.9518 17.1278 7.07957 16.0518 7.07957L12.9758 7.07957C11.8712 7.07957 10.9758 6.18414 10.9758 5.07957V1.94817Z","fill","#F9FDFF"],[1,"vl-btn",3,"routerLink"],[1,"no-border-table","tbl-wid"],[1,"capital-case","thead-align-right-con","thead-sticky",2,"cursor","pointer"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[1,"act-cont"],[1,"btn","btn-primary","btn-sm"],[1,"nav-link",3,"routerLink","href"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"empty-state__active"],[1,"empty-state__icon"],["src","assets/icons/empty_item.svg","alt","empty"],[1,"empty-state__message"]],template:function(i,n){if(i&1){let f=C();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"section",4)(4,"div",5)(5,"h2"),m(6),o(),c(7,be,5,0,"button",6)(8,xe,2,2,"button",7),o(),r(9,"div",8)(10,"div",2)(11,"div",9)(12,"div",10)(13,"h2"),m(14),o(),r(15,"div",11)(16,"span"),v(17,"img",12),o(),r(18,"input",13),Z("ngModelChange",function(P){return g(f),G(n.reqData.FormName,P)||(n.reqData.FormName=P),h(P)}),u("ngModelChange",function(){return g(f),h(n.searchForm())}),o()()()()()(),r(19,"div",14,0)(21,"div",15),c(22,ye,6,4,"table",16),o()(),c(23,Se,6,0,"div",17),o()()()()}i&2&&(a(6),b(n.isFromDashboard?"Created forms":"List of all the forms"),a(),l("ngIf",!n.isFromDashboard),a(),l("ngIf",n.isFromDashboard),a(6),p("",n.totalRecords()," Results"),a(4),W("ngModel",n.reqData.FormName),a(4),l("ngIf",n.filteredForms.length>0),a(),l("ngIf",n.filteredForms.length==0))},dependencies:[k,O,V,ie,ne,oe,re],styles:[".listing-block-height[_ngcontent-%COMP%]{height:calc(90vh - 20px)}.act-cont[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:10px;justify-content:center}.tbl-wid[_ngcontent-%COMP%]{width:100%!important}.th-width-0[_ngcontent-%COMP%], .th-width-1[_ngcontent-%COMP%]{width:35%}.th-width-2[_ngcontent-%COMP%]{width:30%}.empty-state[_ngcontent-%COMP%]{width:auto;background:#fff;border-radius:4px}.empty-state__active[_ngcontent-%COMP%]{top:-400px;position:relative;padding:48px;display:flex;align-items:center;flex-direction:column}.empty-state__icon[_ngcontent-%COMP%]{width:150px;height:145px;display:flex;align-items:center;border-radius:200px;justify-content:center;background-color:#f7fafc;box-shadow:0 2px 1px #e1e3ec}.empty-state__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.empty-state__message[_ngcontent-%COMP%]{color:#009684;font-size:1.5rem;font-weight:500;margin-top:.85rem}"],changeDetection:0})}}return t})();var De=t=>({"rotate-icon":t}),Ie=(t,s,e)=>({"th-width-0":t,"th-width-1":s,"th-width-2":e});function Me(t,s){t&1&&(r(0,"span",27),m(1,"* "),o())}function Ne(t,s){if(t&1&&(r(0,"span"),m(1),o()),t&2){let e=d().$implicit;a(),p(" - Options: ",e.options," ")}}function ke(t,s){if(t&1&&(r(0,"span"),m(1),o()),t&2){let e=d().$implicit;a(),p(" - Options: ",e.options," ")}}function Oe(t,s){if(t&1&&(r(0,"span"),m(1),o()),t&2){let e=d().$implicit;a(),R(" - Options: ",e.options," (",e.selectionType==="multi"?"Multi Select":"Single Select",") ")}}function Ve(t,s){if(t&1&&(r(0,"li")(1,"strong"),m(2),o(),c(3,Me,2,0,"span",26),m(4),c(5,Ne,2,1,"span",22)(6,ke,2,1,"span",22)(7,Oe,2,2,"span",22),o()),t&2){let e=s.$implicit;a(2),b(e.label),a(),l("ngIf",e.required),a(),p(" (",e.type,") "),a(),l("ngIf",e.type==="dropdown"),a(),l("ngIf",e.type==="radio"),a(),l("ngIf",e.type==="checkbox")}}function Ee(t,s){if(t&1&&(r(0,"div")(1,"h5"),m(2),o(),r(3,"ul"),c(4,Ve,8,6,"li",25),o()()),t&2){let e=s.$implicit,i=s.index,n=d(3);a(2),R("Step ",i+1,": ",e.stepName,""),a(2),l("ngForOf",e.fields)("ngForTrackBy",n.trackByField)}}function Te(t,s){if(t&1&&(r(0,"div"),c(1,Ee,5,4,"div",25),o()),t&2){let e=d(2);a(),l("ngForOf",e.formData.stepFields)("ngForTrackBy",e.trackByStep)}}function Le(t,s){t&1&&(r(0,"p",28),m(1,"No steps available for this form."),o())}function Pe(t,s){if(t&1&&(r(0,"div",5)(1,"div",23),c(2,Te,2,2,"div",24)(3,Le,2,0,"ng-template",null,1,X),o()()),t&2){let e=z(4),i=d();a(2),l("ngIf",(i.formData==null||i.formData.stepFields==null?null:i.formData.stepFields.length)>0)("ngIfElse",e)}}function Re(t,s){if(t&1&&(D(0),r(1,"th",31)(2,"div",32),m(3),o()(),I()),t&2){let e=s.$implicit,i=s.index;a(),l("ngClass",M(2,Ie,i===0,i===1,i===2)),a(2),p(" ",e.label," ")}}function Ae(t,s){if(t&1){let e=C();r(0,"tr")(1,"td")(2,"div",32),m(3),o()(),r(4,"td")(5,"div",32),m(6),K(7,"date"),o()(),r(8,"td")(9,"div",32)(10,"button",33),u("click",function(){let n=g(e).index,f=d(2);return h(f.viewSubmission(n))}),m(11," View "),o(),r(12,"button",34),u("click",function(){let n=g(e).index,f=d(2);return h(f.confirmAndDelete(n))}),m(13,"Delete"),o()()()()}if(t&2){let e=s.$implicit,i=s.index;a(3),p(" ",i+1," "),a(3),p(" ",Q(7,2,e.date,"MMM dd, yyyy")," ")}}function Be(t,s){if(t&1&&(r(0,"table",29)(1,"thead",30),c(2,Re,4,6,"ng-container",25),o(),r(3,"tbody"),c(4,Ae,14,5,"tr",25),o()()),t&2){let e=d();a(2),l("ngForOf",e.headers)("ngForTrackBy",e.trackHeader),a(2),l("ngForOf",e.formSubmissions)("ngForTrackBy",e.trackByIndex)}}function je(t,s){t&1&&(r(0,"div")(1,"div",35)(2,"div",36),v(3,"img",37),o(),r(4,"div",38),m(5,"No records found"),o()()())}var pe=(()=>{class t{constructor(e,i,n,f){this.route=e,this.modalService=i,this.cdRef=n,this.confirmationService=f,this.formName="",this.formData={},this.isCollapsed=!0,this.formSubmissions=[],this.headers=le}ngOnInit(){this.formName=this.route.snapshot.paramMap.get("formName"),this.formName&&(this.fetchFormData(),this.fetchFormSubmissions())}fetchFormData(){let e=sessionStorage.getItem("savedForms");if(e){let i=JSON.parse(e);this.formData=i.find(n=>n.formName===this.formName)||{}}}fetchFormSubmissions(){let e=sessionStorage.getItem("savedFormData");if(e){let i=JSON.parse(e);this.formName&&(this.formSubmissions=i[this.formName]||[])}}trackHeader(e,i){return i.name}viewSubmission(e){let i=this.modalService.open(B,{backdrop:"static",centered:!0});i.componentInstance.form=this.formData,i.componentInstance.submissionData=this.formSubmissions[e],i.componentInstance.isView=!0,i.componentInstance.index=e,i.componentInstance.formName=this.formName,i.result.then(()=>{this.fetchFormSubmissions()}).catch(()=>{})}toggleCollapse(){this.isCollapsed=!this.isCollapsed}addFormData(){let e=this.modalService.open(B,{backdrop:"static",centered:!0});e.componentInstance.form=this.formData,e.result.then(()=>{this.fetchFormSubmissions(),this.cdRef.detectChanges()}).catch(()=>{})}trackByIndex(e,i){return e}confirmAndDelete(e){this.confirmationService.open({title:"Confirm Delete",message:"Are you sure you want to delete this form data?",actions:{confirm:{label:"Delete ",class:"btn btn-secondary"}}}).then(n=>{n=="Confirmed"&&this.deleteFormData(e)})}deleteFormData(e){if(this.formName){let i=sessionStorage.getItem("savedFormData");if(i){let n=JSON.parse(i);n[this.formName]&&(n[this.formName].splice(e,1),sessionStorage.setItem("savedFormData",JSON.stringify(n)),this.fetchFormSubmissions(),this.cdRef.detectChanges())}}}trackByStep(e,i){return i.stepName}trackByField(e,i){return i.label}static{this.\u0275fac=function(i){return new(i||t)(_(te),_(E),_(N),_(T))}}static{this.\u0275cmp=w({type:t,selectors:[["app-form-view"]],decls:33,vars:9,consts:[["scrollDiv",""],["noSteps",""],[1,"prview-section"],[1,"p-4"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"col-md-6"],[1,"cln-hd-left-fs"],[1,"col-md-4"],[1,"d-flex","align-items-center","justify-content-end"],[1,"btn","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 18 18","fill","none"],["d","M10.9758 1.94817C10.9758 0.872224 10.1035 0 9.0276 0C7.95165 0 7.07943 0.872226 7.07943 1.94817V5.07957C7.07943 6.18414 6.184 7.07957 5.07943 7.07957L1.94817 7.07957C0.872227 7.07957 0 7.9518 0 9.02774C0 10.1037 0.872226 10.9759 1.94817 10.9759H5.07943C6.184 10.9759 7.07943 11.8713 7.07943 12.9759V16.0518C7.07943 17.1278 7.95165 18 9.0276 18C10.1035 18 10.9758 17.1278 10.9758 16.0518V12.9759C10.9758 11.8713 11.8712 10.9759 12.9758 10.9759H16.0518C17.1278 10.9759 18 10.1037 18 9.02774C18 7.9518 17.1278 7.07957 16.0518 7.07957L12.9758 7.07957C11.8712 7.07957 10.9758 6.18414 10.9758 5.07957V1.94817Z","fill","#F9FDFF"],[1,"strc-prview-section"],[1,"collapsible-header",3,"click"],[2,"top","-2px !important","position","relative",3,"ngClass"],["class","row",4,"ngIf"],[1,"main-right-white-block","listing-block-height","tbl-sct"],[1,"scorbar-table",2,"height","calc(59vh - 200px)"],[1,"custom-table-container"],["class","no-border-table tbl-wid",4,"ngIf"],[4,"ngIf"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"text-muted"],[1,"no-border-table","tbl-wid"],[1,"capital-case","thead-align-right-con","thead-sticky",2,"cursor","pointer"],[3,"ngClass"],[1,"act-cont"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"empty-state__active"],[1,"empty-state__icon"],["src","assets/icons/empty_item.svg","alt","empty"],[1,"empty-state__message"]],template:function(i,n){if(i&1){let f=C();r(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",5)(6,"div",7)(7,"div",8)(8,"h2"),m(9),o(),r(10,"h4"),m(11),o()()()()(),r(12,"div",9)(13,"div",10)(14,"button",11),u("click",function(){return g(f),h(n.addFormData())}),r(15,"span"),S(),r(16,"svg",12),v(17,"path",13),o()(),m(18," Add Data in Form "),o()()()()()()(),H(),r(19,"section",14)(20,"div",3)(21,"div",4)(22,"h4",15),u("click",function(){return g(f),h(n.toggleCollapse())}),m(23),r(24,"span",16),m(25," \u25BC "),o()(),c(26,Pe,5,2,"div",17),o()()(),r(27,"section",18)(28,"div",19,0)(30,"div",20),c(31,Be,5,4,"table",21),o()(),c(32,je,6,0,"div",22),o()}i&2&&(a(9),b(n.formName),a(2),p("Steps: ",n.formData.stepsCount,""),a(12),p(" View ",n.formName," form structure "),a(),l("ngClass",x(7,De,n.isCollapsed)),a(2),l("ngIf",!n.isCollapsed),a(5),l("ngIf",n.formSubmissions.length>0),a(),l("ngIf",n.formSubmissions.length===0))},dependencies:[k,O,V,Y],styles:[".prview-section[_ngcontent-%COMP%]{background:#eff6fb;margin-top:-10px;margin-left:-10px;margin-right:-10px}.tbl-sct[_ngcontent-%COMP%]{margin:20px}.act-cont[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:10px;justify-content:center}.tbl-wid[_ngcontent-%COMP%]{width:100%!important}.th-width-0[_ngcontent-%COMP%]{width:20%}.th-width-1[_ngcontent-%COMP%]{width:45%}.th-width-2[_ngcontent-%COMP%]{width:35%}.empty-state[_ngcontent-%COMP%]{width:auto;background:#fff;border-radius:4px}.empty-state__active[_ngcontent-%COMP%]{top:-225px;position:relative;padding:48px;display:flex;align-items:center;flex-direction:column}.empty-state__icon[_ngcontent-%COMP%]{width:150px;height:145px;display:flex;align-items:center;border-radius:200px;justify-content:center;background-color:#f7fafc;box-shadow:0 2px 1px #e1e3ec}.empty-state__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px}.empty-state__message[_ngcontent-%COMP%]{color:#009684;font-size:1.5rem;font-weight:500;margin-top:.85rem}.strc-prview-section[_ngcontent-%COMP%]{background:#eff6fb;border:1px solid #88c6f3;border-radius:10px;margin:20px}.collapsible-header[_ngcontent-%COMP%]{cursor:pointer;font-size:1.2rem;font-weight:700;display:flex;align-items:center}.collapsible-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:transform .3s ease}.rotate-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.cln-hd-left-fs[_ngcontent-%COMP%]{display:flex;column-gap:15px;top:10px;align-items:center;position:relative}.cln-hd-left-fs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px;width:calc(100% - 110px)}"],changeDetection:0})}}return t})();var $e=[{path:"listing",component:de},{path:"form-view/:formName",component:pe},{path:"**",pathMatch:"full",redirectTo:"dashboard"}],fe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=F({imports:[A.forChild($e),A]})}}return t})();var pt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=F({imports:[ee,fe,ae]})}}return t})();export{de as a,pt as b};
